
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>Using the Authorization Code Flow &#8212; Battle.net API 2.1.0a1 documentation</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/classic.css" />

    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>

    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Developer Portal Instructions" href="dev_portal.html" />
    <link rel="prev" title="Credential Authorization Workflow" href="cred_client.html" />
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="dev_portal.html" title="Developer Portal Instructions"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="cred_client.html" title="Credential Authorization Workflow"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">Battle.net API 2.1.0a1 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="index.html" accesskey="U">Tutorials</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">Using the Authorization Code Flow</a></li>
      </ul>
    </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">

  <section id="using-the-authorization-code-flow">
<h1>Using the Authorization Code Flow<a class="headerlink" href="#using-the-authorization-code-flow" title="Permalink to this headline">¶</a></h1>
<div class="admonition warning" id="auth-code-flow">
<p class="admonition-title">Warning</p>
<p>A web server must be configured to accept the redirect back from the Blizzard authentication servers in order to
use any endpoint that requires the authorization workflow enabled client.  They are listed on the
<a class="reference external" href="'https://develop.battle.net/documentation/guides/using-oauth/authorization-code-flow'">Authorization Code Flow</a></p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ul class="simple">
<li><p>Note that you can still use the user authorization client, with the endpoints that accept the client credentials
as well.</p></li>
<li><p>Any OAuth v2 or OpenID Connect client will work with the endpoints.  The ones contained in the package are for
convenience</p></li>
<li><p>Authorization Code Flow will be the most common for user authentication, while credential client code flow
will be for backend work, such as maintaining the persistent data, such as playable classes.</p></li>
</ul>
</div>
<section id="the-workflow">
<h2>The Workflow<a class="headerlink" href="#the-workflow" title="Permalink to this headline">¶</a></h2>
<ol class="arabic simple">
<li><p>The user goes to a login page on a site</p></li>
<li><p>The site redirects the the user to the authorization url, generated by client.authorization_url()</p></li>
<li><p>The user then successfully logs into the Battle.net authorization server, and allows access to the account
information</p></li>
<li><p>The Battle.net server, then redirects the user back to the redirect_url</p></li>
</ol>
</section>
<section id="example">
<h2>Example<a class="headerlink" href="#example" title="Permalink to this headline">¶</a></h2>
<p>The below example assumes, that you are using the WoWClient included with the package.  Again, you are not required
to use any of the included clients.  The only requirement is that you use an OAuth V2 or OpenID Connect based client</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="o">&gt;</span> <span class="kn">from</span> <span class="nn">battlenet_client</span> <span class="kn">import</span> <span class="n">wow</span>
<span class="o">&gt;</span> <span class="n">client</span> <span class="o">=</span> <span class="n">wow</span><span class="o">.</span><span class="n">WoWClient</span><span class="p">(</span><span class="o">&lt;</span><span class="n">region</span><span class="o">&gt;</span><span class="p">,</span> <span class="n">scope</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;wow.profile&#39;</span><span class="p">],</span> <span class="n">redirect_uri</span><span class="o">=&lt;</span><span class="n">redirect_uri</span><span class="o">&gt;</span><span class="p">,</span>
                         <span class="n">client_id</span><span class="o">=&lt;</span><span class="n">CLIENT_ID</span><span class="o">&gt;</span><span class="p">,</span> <span class="n">client_secret</span><span class="o">=&lt;</span><span class="n">CLIENT_SECRET</span><span class="o">&gt;</span><span class="p">)</span>

<span class="c1"># Once the client has been instantiated, then the have the code redirect the user to the authorization URL</span>
<span class="o">&gt;</span> <span class="n">redirect</span><span class="p">(</span><span class="n">client</span><span class="o">.</span><span class="n">authorization_url</span><span class="p">())</span>

<span class="c1"># Assuming the user was successfully authenticated with Battle.net, they will be redirected back to &lt;redirect_uri&gt;</span>
<span class="c1"># there the server will process the callback request, and then you can access the API as normal</span>
<span class="o">&gt;</span> <span class="kn">from</span> <span class="nn">battlenet_client.wow.game_data</span> <span class="kn">import</span> <span class="n">PlayableClass</span>
<span class="o">&gt;</span> <span class="n">PlayableClass</span><span class="o">.</span><span class="n">playable_class</span><span class="p">(</span><span class="n">client</span><span class="p">,</span> <span class="s1">&#39;&lt;region_tag&gt;&#39;</span><span class="p">,</span> <span class="n">class_id</span><span class="o">=</span><span class="mi">7</span><span class="p">,</span> <span class="n">locale</span><span class="o">=&lt;</span><span class="n">localization</span><span class="o">&gt;</span><span class="p">)</span>

<span class="c1"># returns the data for the shaman class</span>
<span class="p">{</span><span class="s1">&#39;_links&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;self&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;href&#39;</span><span class="p">:</span> <span class="s1">&#39;https://us.api.blizzard.com/data/wow/playable-class/...</span>
<span class="o">&gt;</span> <span class="n">client</span><span class="o">.</span><span class="n">account</span><span class="o">.</span><span class="n">account_profile_summary</span><span class="p">(</span><span class="s1">&#39;en_US&#39;</span><span class="p">)</span>
<span class="c1"># returns data about the account (assuming the user has authorized your application to access it)</span>
<span class="p">{</span><span class="s2">&quot;_links&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;self&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;href&quot;</span><span class="p">:</span> <span class="s2">&quot;https://us.api.blizzard.com/profile/user/wow?namespace=profile-us&quot;</span><span class="p">},</span> <span class="o">...</span>
</pre></div>
</div>
</section>
</section>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <div>
    <h3><a href="../index.html">Table of Contents</a></h3>
    <ul>
<li><a class="reference internal" href="#">Using the Authorization Code Flow</a><ul>
<li><a class="reference internal" href="#the-workflow">The Workflow</a></li>
<li><a class="reference internal" href="#example">Example</a></li>
</ul>
</li>
</ul>

  </div>
  <div>
    <h4>Previous topic</h4>
    <p class="topless"><a href="cred_client.html"
                          title="previous chapter">Credential Authorization Workflow</a></p>
  </div>
  <div>
    <h4>Next topic</h4>
    <p class="topless"><a href="dev_portal.html"
                          title="next chapter">Developer Portal Instructions</a></p>
  </div>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../_sources/tutorials/auth_client.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="dev_portal.html" title="Developer Portal Instructions"
             >next</a> |</li>
        <li class="right" >
          <a href="cred_client.html" title="Credential Authorization Workflow"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">Battle.net API 2.1.0a1 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="index.html" >Tutorials</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">Using the Authorization Code Flow</a></li>
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2022, David &#34;Gahd&#34; Couples.
      Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 4.4.0.
    </div>
  </body>
</html>
